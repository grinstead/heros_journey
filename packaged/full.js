'use strict';const f=new Map;let l=null;function m(a){const b=l,c=[];l=c;let e=!1;try{const d=a();if(null==d||"object"!==typeof d)throw Error("buildCleanable given non-object result");const h=f.get(d);f.set(d,h?h.concat(c):c);e=!0;return d}finally{l=b,e||c.forEach(d=>{try{d()}catch(h){console.error(h)}})}}function n(a){if(l)l.push(a);else throw Error("onCleanUp called outside of runAndCleanOnError call");};const p=new Float32Array(16);function q(a){if(!a.a){var b=r;if(!b)throw Error("ProgramInput.set called without any program rendering");if(!b.g.has(a))throw Error("ProgramInput.set called during a different program");a.b=t(b,a.f);a.a=b.c;u(()=>{a.a=null;a.b=null})}}class v{constructor(a){this.b=this.a=null;this.f=a}}
class w extends v{set(a,b,c,e,d,h,g,k,z,A,B,C,D,E,F,G){p[0]=a;p[1]=b;p[2]=c;p[3]=e;p[4]=d;p[5]=h;p[6]=g;p[7]=k;p[8]=z;p[9]=A;p[10]=B;p[11]=C;p[12]=D;p[13]=E;p[14]=F;p[15]=G;q(this);this.a.uniformMatrix4fv(this.b,!1,p)}};let r=null,x=null;function t(a,b){var c=a.f.get(b);if(c)return c;c=a.c.getUniformLocation(a.a,b);if(null==c)throw Error(`Unknown uniform value "${b}"`);a.f.set(b,c);return c}class y{constructor(a,b,c,e){this.name=a;this.c=b;this.inputs=e;this.g=new Set(Object.values(e));this.a=c;this.b=new Map;this.f=new Map}}
function H(a,b){if(r)throw Error("renderInProgram called during another renderInProgram");const c=a.c;c.useProgram(a.a);r=a;let e=!0;try{b(c),e=!1}finally{x&&(a=x,x=null,a.forEach(d=>{try{d(e)}catch(h){console.error(h)}})),r=null}}function u(a){if(!r)throw Error("onRenderComplete called outside of renderInProgram");x?x.push(a):x=[a]}
function I(a){return m(()=>{const b=a.c;var c=a.j;const e=J(b,b.createShader(b.VERTEX_SHADER),c.l);c=J(b,b.createShader(b.FRAGMENT_SHADER),c.h);const d=b.createProgram();n(()=>void b.deleteProgram(d));b.attachShader(d,e);b.attachShader(d,c);b.linkProgram(d);if(!b.getProgramParameter(d,b.LINK_STATUS))throw Error(`Failed to link ${a.name} program: ${b.getProgramInfoLog(d)}`);return new y(a.name,b,d,a.inputs)})}
function J(a,b,c){a.shaderSource(b,c.code);n(()=>void a.deleteShader(b));a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS))throw Error(`Failed to compile ${c.name}: ${a.getShaderInfoLog(b)}`);return b};window.onload=function(){var a=document.getElementById("canvas");a=a instanceof HTMLCanvasElement?a:null;var b=/rgb\((\d+), (\d+), (\d+)\)/.exec(getComputedStyle(a).getPropertyValue("background-color"));const c=[b[1]/255,b[2]/255,b[3]/255];b=window.devicePixelRatio||1;a.width*=b;a.height*=b;a=a.getContext("webgl2",{antialias:!1,alpha:!1});a.enable(a.BLEND);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);const e=I({name:"main",c:a,inputs:{i:new w("u_projection")},j:{l:{name:"vertex",code:"#version 300 es\n  in vec3 a_position;\n  uniform mat4 u_projection;\n  \n  void main() {\n    gl_Position = u_projection * vec4(a_position, 1);\n  }"},
h:{name:"fragment",code:"#version 300 es\n  precision highp float;\n  \n  out vec4 output_color;\n  \n  void main() {\n    output_color = vec4(0.f, 0.f, 0.f, 1.f);\n  }"}}}),d=[1,0,0,0,1,0,-1,0,0,0,-1,0],h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);H(e,g=>{e.inputs.i.set(.5,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);g.clearColor(c[0],c[1],c[2],1);g.clear(g.COLOR_BUFFER_BIT);g.bindBuffer(g.ARRAY_BUFFER,h);var k=e.b.get("a_position");if(null==
k){k=e.c.getAttribLocation(e.a,"a_position");if(-1===k)throw Error('Unknown attribute "a_position"');e.b.set("a_position",k)}g.enableVertexAttribArray(k);g.vertexAttribPointer(k,3,g.FLOAT,!1,0,0);g.drawArrays(g.LINE_LOOP,0,d.length/3)});console.log("hola")};
